# Admin Scaffold - åå°ç®¡ç†è„šæ‰‹æ¶
åŸºäº Phoenix Framework çš„åå°ç®¡ç†ç³»ç»Ÿè„šæ‰‹æ¶ï¼ŒåŒ…å«ç”¨æˆ·è®¤è¯ã€ä»ªè¡¨æ¿å’Œç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€‚
sss
## æŠ€æœ¯æ ˆ

- **Phoenix**: 1.8.3
- **Elixir**: ~> 1.15
- **PostgreSQL**: æ•°æ®åº“
- **Phoenix LiveView**: å®æ—¶äº¤äº’ UI
- **Swoosh**: é‚®ä»¶å‘é€
- **Bandit**: Web æœåŠ¡å™¨

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–å¹¶è®¾ç½®æ•°æ®åº“

```bash
mix setup
```

æˆ–è€…åˆ†æ­¥æ‰§è¡Œï¼š

```bash
mix deps.get
mix ecto.create
mix ecto.migrate
```

### 2. å¯åŠ¨æœåŠ¡å™¨

```bash
mix phx.server
```

æˆ–è€…åœ¨ IEx ä¸­å¯åŠ¨ï¼š

```bash
iex -S mix phx.server
```

æœåŠ¡å™¨å°†åœ¨ http://localhost:4000 å¯åŠ¨

### 3. é¦–æ¬¡ä½¿ç”¨

1. è®¿é—® http://localhost:4000/users/register æ³¨å†Œè´¦æˆ·
2. è¾“å…¥é‚®ç®±å’Œå¯†ç å®Œæˆæ³¨å†Œ
3. æ³¨å†Œåè‡ªåŠ¨ç™»å½•ï¼Œè¿›å…¥ä»ªè¡¨æ¿

## ä¸»è¦åŠŸèƒ½

### ä»ªè¡¨æ¿ (`/dashboard`)

ç™»å½•åçš„ä¸»é¡µé¢ï¼Œæ˜¾ç¤ºï¼š
- ğŸ“Š ç”¨æˆ·æ€»æ•°ç»Ÿè®¡
- âœ… ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- â±ï¸ ç³»ç»Ÿè¿è¡Œæ—¶é—´
- ğŸ”— å¿«é€Ÿæ“ä½œé“¾æ¥

### ç”¨æˆ·ç®¡ç† (`/admin/users`)

ç®¡ç†ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·ï¼š
- æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼ˆIDã€é‚®ç®±ã€æ³¨å†Œæ—¶é—´ï¼‰
- ç‚¹å‡»æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…
- è¿”å›ä»ªè¡¨æ¿

### ç”¨æˆ·è¯¦æƒ… (`/admin/users/:id`)

æŸ¥çœ‹å•ä¸ªç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼š
- ç”¨æˆ· ID
- é‚®ç®±åœ°å€
- é‚®ç®±ç¡®è®¤çŠ¶æ€ï¼ˆå·²ç¡®è®¤/æœªç¡®è®¤ï¼‰
- æ³¨å†Œæ—¶é—´
- æœ€åæ›´æ–°æ—¶é—´

### ä¸ªäººè®¾ç½® (`/users/settings`)

ç”¨æˆ·å¯ä»¥ä¿®æ”¹è‡ªå·±çš„è´¦æˆ·ä¿¡æ¯ï¼š
- ä¿®æ”¹é‚®ç®±åœ°å€
- ä¿®æ”¹å¯†ç 
- ç¡®è®¤é‚®ç®±

## é¡¹ç›®ç»“æ„

```
admin_scaffold/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ admin_scaffold/
â”‚   â”‚   â”œâ”€â”€ accounts/          # ç”¨æˆ·è´¦æˆ·ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ex        # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user_token.ex  # ç”¨æˆ·ä»¤ç‰Œ
â”‚   â”‚   â”‚   â””â”€â”€ user_notifier.ex # ç”¨æˆ·é€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ accounts.ex        # è´¦æˆ·ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ repo.ex            # æ•°æ®åº“ä»“åº“
â”‚   â””â”€â”€ admin_scaffold_web/
â”‚       â”œâ”€â”€ live/
â”‚       â”‚   â”œâ”€â”€ dashboard_live/
â”‚       â”‚   â”‚   â””â”€â”€ index.ex   # ä»ªè¡¨æ¿é¡µé¢
â”‚       â”‚   â””â”€â”€ user_live/
â”‚       â”‚       â”œâ”€â”€ index.ex   # ç”¨æˆ·åˆ—è¡¨
â”‚       â”‚       â”œâ”€â”€ show.ex    # ç”¨æˆ·è¯¦æƒ…
â”‚       â”‚       â”œâ”€â”€ login.ex   # ç™»å½•é¡µé¢
â”‚       â”‚       â”œâ”€â”€ registration.ex # æ³¨å†Œé¡µé¢
â”‚       â”‚       â””â”€â”€ settings.ex # è®¾ç½®é¡µé¢
â”‚       â”œâ”€â”€ controllers/
â”‚       â”‚   â””â”€â”€ user_session_controller.ex # ä¼šè¯æ§åˆ¶å™¨
â”‚       â””â”€â”€ router.ex          # è·¯ç”±é…ç½®
â”œâ”€â”€ priv/
â”‚   â””â”€â”€ repo/
â”‚       â””â”€â”€ migrations/        # æ•°æ®åº“è¿ç§»
â””â”€â”€ mix.exs                    # é¡¹ç›®é…ç½®
```

## è·¯ç”±è¯´æ˜

### å…¬å¼€è·¯ç”±ï¼ˆæ— éœ€ç™»å½•ï¼‰

- `GET /` - é¦–é¡µ
- `GET /users/register` - ç”¨æˆ·æ³¨å†Œé¡µé¢
- `GET /users/log-in` - ç”¨æˆ·ç™»å½•é¡µé¢
- `POST /users/log-in` - å¤„ç†ç™»å½•è¯·æ±‚

### éœ€è¦è®¤è¯çš„è·¯ç”±

- `GET /dashboard` - ç®¡ç†ä»ªè¡¨æ¿
- `GET /admin/users` - ç”¨æˆ·åˆ—è¡¨
- `GET /admin/users/:id` - ç”¨æˆ·è¯¦æƒ…
- `GET /users/settings` - ä¸ªäººè®¾ç½®
- `DELETE /users/log-out` - ç™»å‡º

## å¼€å‘å‘½ä»¤

```bash
# è¿è¡Œæµ‹è¯•
mix test

# æ ¼å¼åŒ–ä»£ç 
mix format

# é‡ç½®æ•°æ®åº“
mix ecto.reset

# ç”Ÿæˆæ–°çš„è¿ç§»
mix ecto.gen.migration migration_name

# è¿è¡Œè¿ç§»
mix ecto.migrate

# å›æ»šè¿ç§»
mix ecto.rollback
```

## æ•°æ®åº“

é¡¹ç›®ä½¿ç”¨ PostgreSQL æ•°æ®åº“ï¼ŒåŒ…å«ä»¥ä¸‹è¡¨ï¼š

- `users` - ç”¨æˆ·è¡¨
- `users_tokens` - ç”¨æˆ·ä»¤ç‰Œè¡¨ï¼ˆç”¨äºä¼šè¯å’Œé‚®ç®±ç¡®è®¤ï¼‰

## æ³¨æ„äº‹é¡¹

1. **é‚®ä»¶åŠŸèƒ½**: å½“å‰ Swoosh é…ç½®äº†ä½†æœªè®¾ç½®å®é™…çš„é‚®ä»¶å‘é€å™¨ï¼Œé‚®ç®±ç¡®è®¤åŠŸèƒ½éœ€è¦é…ç½®é‚®ä»¶æœåŠ¡
2. **ç”Ÿäº§ç¯å¢ƒ**: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œè¯·å‚è€ƒ [Phoenix éƒ¨ç½²æŒ‡å—](https://hexdocs.pm/phoenix/deployment.html)
3. **å®‰å…¨æ€§**: ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®å¼ºå¯†ç å’Œå®‰å…¨çš„ secret_key_base

## äº†è§£æ›´å¤š

* Phoenix å®˜ç½‘: https://www.phoenixframework.org/
* Phoenix æŒ‡å—: https://hexdocs.pm/phoenix/overview.html
* Phoenix æ–‡æ¡£: https://hexdocs.pm/phoenix
* Elixir è®ºå›: https://elixirforum.com/c/phoenix-forum
* Phoenix æºç : https://github.com/phoenixframework/phoenix

## è®¸å¯è¯

MIT
