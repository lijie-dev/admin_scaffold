---
name: elixir-discipline
description: 任何响应前的强制性预检查 - 确保你使用适用的技能并遵循最佳实践。在响应任何 Elixir/Phoenix 请求前首先使用此技能。
---

# Elixir 纪律：强制性技能执行

## 绝对要求

在你对任何关于 Elixir/Phoenix 代码的请求做出响应之前，你必须完成此检查清单。

这不是可选的。这不可协商。你不能为逃避这一点而进行理性化。

## 响应前检查清单

**停止。在输入任何响应之前，问自己：**

1. **这是关于实现功能还是修复错误吗？**
   → 首先使用 `elixir-tdd-enforcement` 技能
   → 没有失败的测试就没有代码

2. **这是关于调试错误或问题吗？**
   → 使用 `elixir-root-cause-only` 技能
   → 没有快速修复，先追踪到根本原因

3. **我声称某些东西有效吗？**
   → 使用 `elixir-verification-gate` 技能
   → 运行实际命令，读取实际输出

4. **我即将修改忽略文件（dialyzer.ignore、.credo.exs exclude）吗？**
   → 立即停止
   → 使用 `elixir-no-shortcuts` 技能
   → 修复真正的问题

5. **我在创建占位符代码或必需数据的默认值吗？**
   → 立即停止
   → 使用 `elixir-no-placeholders` 技能
   → 大声失败，快速失败，没有无声失败

6. **我是否建议"只是尝试"某些东西？**
   → 停止
   → 改用系统化调试

## 如果技能适用，你必须使用它

**这意味着：**
- 宣布你正在使用哪个技能
- 完全遵循它
- 不要跳过步骤
- 不要修改流程

**如果适用时跳过技能 = 任务失败**

## 错误的理性化

### "这只是一个简单的问题"
错误。无论如何检查技能列表。

### "我记得这个技能，我不需要读它"
错误。每次都要读。细节很重要。

### "这个技能可能不适用于这里"
错误。如果有 1% 的可能性它适用，你必须读它。

### "我只是快速做这个"
错误。快速通常意味着错误。使用适当的技能。

### "用户只是想要一个简单的答案"
错误。用户想要一个正确的答案。使用技能来确保正确性。

### "这会花太长时间"
错误。做错了花的时间更长。使用这些技能。

## 执行

**关于 Elixir/Phoenix 代码的每个响应必须以以下内容开始：**

```
[检查适用的技能...]
- elixir-tdd-enforcement: [是/否 - 原因]
- elixir-root-cause-only: [是/否 - 原因]
- elixir-verification-gate: [是/否 - 原因]
- elixir-no-shortcuts: [是/否 - 原因]
- elixir-no-placeholders: [是/否 - 原因]

[使用技能：技能名称]
```

**如果你在没有此检查清单的情况下响应 = 自动失败。**

## 技能描述

**elixir-tdd-enforcement**
- 何时：实现任何功能或错误修复
- 强制：先测试，看它失败，然后实现
- 防止：没有测试的代码，未测试的更改

**elixir-root-cause-only**
- 何时：调试任何错误或问题
- 强制：在提出修复之前追踪到根本原因
- 防止：症状修复，随机更改

**elixir-verification-gate**
- 何时：声称任何东西有效（测试通过、构建成功等）
- 强制：运行实际命令，读取实际输出
- 防止：假设、"应该有效"、过早完成

**elixir-no-shortcuts**
- 何时：即将修改忽略文件或抑制警告
- 强制：修复真正的问题
- 防止：技术债积累

**elixir-no-placeholders**
- 何时：创建任何代码或数据结构
- 强制：没有占位符代码，没有必需数据的默认值，大声失败
- 防止：无声失败，调试噩梦，隐藏的错误

## 跳过技能的后果

**如果你跳过适用的技能：**
1. 代码将是错误的
2. 测试不会真正验证行为
3. 错误不会真正被修复
4. 技术债将积累
5. 用户将不得不重做工作

**通过跳过技能"节省"的时间在调试中会损失 10 倍。**

## 记住

> "如果你的任务存在技能，你必须使用它，否则你将在任务中失败。"

这不是关于偏好。这是关于生成正确的、可维护的 Elixir 代码。

## 规则

**如果有 1% 的可能性技能适用 → 你绝对必须使用它**

没有例外。没有特殊情况。没有"只是这一次"。
